<div class="container mt-5 box-shadow">
  <div class="container mt-5 box-shadow dark" *ngIf="showFilters()">
    <div class="row mb-4">
      <div class="col-md-3" *ngIf="showPaidFilter()">
        <div class="form-group">
          <label class="d-block mb-2">Filtrar por Situação:</label>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="paidStatus"
              id="statusUnpaid"
              [value]="false"
              [(ngModel)]="query.is_paid"
            />
            <label class="form-check-label" for="statusUnpaid">
              Mostrar não pagas
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="paidStatus"
              id="statusPaid"
              [value]="true"
              [(ngModel)]="query.is_paid"
            />
            <label class="form-check-label" for="statusPaid">
              Mostrar pagas
            </label>
          </div>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-group">
          <label for="categorySelector">Categoria:</label>
          <select
            id="categorySelector"
            class="form-control"
            [(ngModel)]="query.category_id"
          >
            <option [ngValue]="null">Todas as Categorias</option>
            <option *ngFor="let category of categories" [ngValue]="category.id">
              {{ category.category_name }}
            </option>
          </select>
        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
          <label for="monthInput">Mês:</label>
          <input
            type="number"
            id="monthInput"
            class="form-control"
            [(ngModel)]="query.reference_month"
            min="1"
            max="12"
            placeholder="Mês"
          />
        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
          <label for="yearInput">Ano:</label>
          <input
            type="number"
            id="yearInput"
            class="form-control"
            [(ngModel)]="query.reference_year"
            placeholder="Ano"
          />
        </div>
      </div>

      <div class="col-md-2 d-flex align-items-end">
        <button class="btn btn-primary box-shadow" (click)="applyFilters()">
          Aplicar Filtros
        </button>
      </div>
    </div>
  </div>

  <h2 class="mb-4">Lista de Categorias</h2>

  <table class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th class="rem15">ID</th>
        <th class="rem15">Descrição</th>
        <th class="rem15">Valor</th>
        <th class="rem15">Situação</th>
        <th class="rem15">Pagamento</th>
        <th class="rem15">Vencimento</th>
        <th class="rem15">Categoria</th>
        <th class="rem15">Observações</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bill of bills">
        <td class="rem15" [ngClass]="billColor(bill)">{{ bill.id }}</td>
        <td class="rem15" [ngClass]="billColor(bill)">
          {{ bill.bill_description }}
        </td>
        <td class="rem15" [ngClass]="billColor(bill)">
          R$ {{ bill.bill_value.toFixed(2) }}
        </td>
        <td class="rem15" [ngClass]="billColor(bill)">
          {{ bill.is_paid ? "Pago" : "A pagar" }}
        </td>
        <td class="rem15" [ngClass]="billColor(bill)">
          {{ bill.payment_date ? bill.payment_date : "N/A" }}
        </td>
        <td class="rem15" [ngClass]="billColor(bill)">{{ bill.due_date }}</td>
        <td class="rem15" [ngClass]="billColor(bill)">
          {{ bill.category_name }}
        </td>
        <td class="rem15" [ngClass]="billColor(bill)">
          {{ bill.observations ? bill.observations : "-" }}
        </td>
        <td class="rem15" [ngClass]="billColor(bill)">
          <div class="mb-3 btn-div" *ngIf="imgSource !== ''">
            <button
              (click)="executeAction(bill)"
              class="btn btn-primary box-shadow"
            >
              <img class="icon" [src]="imgSource" alt="icon" />
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="form-group">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="limitSelector">Itens por página:</label>
        <select
          id="limitSelector"
          class="form-control dark bold"
          [(ngModel)]="limit"
          (change)="onLimitChange()"
        >
          <option [ngValue]="5">5</option>
          <option [ngValue]="10">10</option>
          <option [ngValue]="20">20</option>
        </select>
      </div>

      <div
        class="pagination-controls d-flex justify-content-center col-md-6 mt-3"
      >
        <button
          class="btn btn-primary box-shadow me-2 reduced-button"
          (click)="previousPage()"
          [disabled]="currentPage === 1"
        >
          Anterior
        </button>

        <span class="p-2"> Página {{ currentPage }} </span>

        <button
          class="btn btn-primary box-shadow reduced-button"
          (click)="nextPage()"
          [disabled]="!hasMorePages"
        >
          Próxima
        </button>
      </div>
    </div>
  </div>
</div>
